<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Admin Panel</title>
  <style>
    body {
      background: #121212;
      color: white;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .box {
      max-width: 600px;
      margin: auto;
      background: #1f1f1f;
      padding: 20px;
      border-radius: 10px;
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      border-radius: 6px;
      border: none;
      font-size: 15px;
    }
    button {
      background: #4caf50;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background: #3b8c40;
    }
  </style>
</head>
<body>

<div class="box" id="login-box">
  <h2>Admin Login</h2>
  <input id="pw" type="password" placeholder="Adgangskode" />
  <button onclick="login()">Log ind</button>
</div>

<div class="box" id="admin-box" style="display:none;">
  <h2>Tilføj nyt produkt</h2>

  <input id="name" placeholder="Navn" />
  <input id="price" placeholder="Pris" />
  <input id="image" placeholder="Billede URL (valgfrit)" />

  <button onclick="addProduct()">Tilføj produkt</button>

  <p id="status"></p>
</div>

<script>
  const PASSWORD = "Test123!";

  function login() {
    if (document.getElementById("pw").value === PASSWORD) {
      document.getElementById("login-box").style.display = "none";
      document.getElementById("admin-box").style.display = "block";
    } else {
      alert("Forkert adgangskode.");
    }
  }

  function addProduct() {
    fetch("products.json")
      .then(r => r.json())
      .then(data => {
        data.products.push({
          name: document.getElementById("name").value,
          price: document.getElementById("price").value,
          image: document.getElementById("image").value || "https://via.placeholder.com/400x200"
        });

        const json = JSON.stringify(data, null, 2);

        const blob = new Blob([json], { type: "application/json" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "products.json";
        a.click();

        document.getElementById("status").innerText =
          "Produkt tilføjet! Upload filen products.json til GitHub igen for at gemme ændringer.";
      });
  }
</script>

</body>
</html>
